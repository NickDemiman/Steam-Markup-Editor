(()=>{"use strict";var e={214:(e,t,n)=>{function r(){const e=document.getElementById("editor"),t=document.getElementById("preview");let n=e.value;n=n.replace(/\n/g,"<br>"),n=n.replace(/\[h1\](.*?)\[\/h1\]/g,"<h1>$1</h1>"),n=n.replace(/\[h2\](.*?)\[\/h2\]/g,"<h2>$1</h2>"),n=n.replace(/\[h3\](.*?)\[\/h3\]/g,"<h3>$1</h3>"),n=n.replace(/\[b\](.*?)\[\/b\]/g,"<b>$1</b>"),n=n.replace(/\[u\](.*?)\[\/u\]/g,"<u>$1</u>"),n=n.replace(/\[i\](.*?)\[\/i\]/g,"<i>$1</i>"),n=n.replace(/\[strike\](.*?)\[\/strike\]/g,"<strike>$1</strike>"),n=n.replace(/\[spoiler\](.*?)\[\/spoiler\]/g,'<span style="background-color: black; color: black;" onclick="this.style.color=\'white\'">$1</span>'),n=n.replace(/\[noparse\](.*?)\[\/noparse\]/g,"<pre>$1</pre>"),n=n.replace(/\[hr\]/g,"<hr>"),n=n.replace(/\[code\](.*?)\[\/code\]/g,"<code>$1</code>"),n=n.replace(/\[quote=(.*?)\](.*?)\[\/quote\]/g,'<div class="quote-box"><p class="quote-author">Originally posted by <i>$1</i>:</p><p>$2</p></div>'),n=n.replace(/\[url=(.*?)\](.*?)\[\/url\]/g,'<a href="$1" target="_blank">$2</a>'),t.innerHTML=n}n.r(t),n.d(t,{updatePreview:()=>r})}},t={};function n(r){var l=t[r];if(void 0!==l)return l.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(214);const{updatePreview:l}=n(214),o=document.getElementById("editor"),a=document.querySelectorAll(".buttons button");o.addEventListener("input",r.updatePreview),a.forEach((e=>{e.addEventListener("click",(function(){const e=this.getAttribute("data-tag");if("quote"===e){const e=editor.value.substring(editor.selectionStart,editor.selectionEnd);return document.getElementById("quoteText").value=e,void(document.getElementById("quoteModal").style.display="flex")}if("url"===e){const e=editor.value.substring(editor.selectionStart,editor.selectionEnd);return document.getElementById("urlText").value=e,void(document.getElementById("urlModal").style.display="flex")}let t=`[${e}]`,n="hr"!==e?`[/${e}]`:"";const l=editor.selectionStart,o=editor.selectionEnd;editor.setRangeText(t+editor.value.substring(l,o)+n,l,o,"select"),(0,r.updatePreview)()}))})),document.getElementById("insertQuote").addEventListener("click",(function(){const e=document.getElementById("editor"),t=`[quote=${document.getElementById("author").value}] ${document.getElementById("quoteText").value} [/quote]`,n=e.value.substring(0,e.selectionStart),l=e.value.substring(e.selectionEnd,e.value.length);e.value=n+t+l,document.getElementById("quoteModal").style.display="none",(0,r.updatePreview)()})),document.getElementById("insertUrl").addEventListener("click",(function(){const e=document.getElementById("editor"),t=`[url=${document.getElementById("urlInput").value}]${document.getElementById("urlText").value}[/url]`,n=e.value.substring(0,e.selectionStart),r=e.value.substring(e.selectionEnd,e.value.length);e.value=n+t+r,document.getElementById("urlModal").style.display="none",l()})),o.addEventListener("keydown",(function(e){if(e.ctrlKey){let t="";switch(e.key){case"b":case"B":case"и":case"И":t="b";break;case"i":case"I":case"ш":case"Ш":t="i";break;case"u":case"U":case"г":case"Г":t="u";break;case"k":case"K":case"л":case"Л":const n=this.value.substring(this.selectionStart,this.selectionEnd);return document.getElementById("urlText").value=n,document.getElementById("urlModal").style.display="flex",void e.preventDefault()}if(e.shiftKey)switch(e.key){case"X":case"Ч":t="strike"}if(e.altKey)switch(e.key){case"1":t="h1";break;case"2":t="h2";break;case"3":t="h3"}if(t){const n=`[${t}]`,l="hr"!==t?`[/${t}]`:"",o=this.selectionStart,a=this.selectionEnd;this.setRangeText(n+this.value.substring(o,a)+l,o,a,"select"),(0,r.updatePreview)(),e.preventDefault()}}})),o.addEventListener("input",(()=>function(){const e=editor.value;localStorage.setItem("markupText",e)}())),document.addEventListener("DOMContentLoaded",(()=>function(e){const t=localStorage.getItem("markupText");t&&(document.getElementById("editor").value=t,(0,r.updatePreview)())}()))})();